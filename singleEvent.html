<!DOCTYPE html>
<html>

<head>
    <title>Event</title>

    <meta charset="utf-8">
    <meta name="description" content="Event">
    <meta name="author" content="PWE_Group9">

    <!--Sets the logo in the browser tab-->
    <link rel="icon" type="image/jpg" href="img/astc_logo_s.jpg">

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- CSS import -->
    <link rel="stylesheet" href="css/navbar.css">
    <link rel="stylesheet" href="css/linkBox.css">

    <!-- Load an icon library to show a hamburger menu (bars) on small screens -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- User icon library -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU"
        crossorigin="anonymous">
    
    <!-- JS import -->
    <script src="JS/navbar.js"></script>
    <!--<script src="JS/http.js"></script>-->
</head>

<body>
    <div class="topnav" id="myTopnav">
        <a href="index.html"><img src="https://astc.dk/wp-content/uploads/2018/05/logo_white.svg" alt="ASTS_logo" style="height:17px;border:0;"></a>
        <a href="index.html">Home</a>
        <a href="map.html">Map</a>
        <a href="shops.html">Shops</a>
        <a href="offers.html">Offers</a>
        <a href="events.html" class="active">Events</a>
        <a href="userLogin.html" class="userIcon">
            <i class="fas fa-user"></i>
        </a>
        <a href="javascript:void(0);" class="icon" onclick="navbar()">
            <i class="fa fa-bars"></i>
        </a>
    </div>

    <div style="padding:16px">
        <h1>Single Event</h1>

        <div id="el1"></div>
    </div>

    <script>

var pageURL = window.location.href;
var CurrentID = pageURL.substr(pageURL.lastIndexOf('/') + 18);
console.log(CurrentID);


function sendReq(url, callbackFunction) {
    var xmlhttp

    if (window.ActiveXObject) {
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    else if (window.XMLHttpRequest) {
        xmlhttp = new XMLHttpRequest();
    }

    xmlhttp.onreadystatechange = function () {
        if (xmlhttp.readyState == 4 && xmlhttp.status == '200') {
            if (callbackFunction) callbackFunction(xmlhttp.responseText);
        }
    }

    xmlhttp.open("GET", url, true);
    xmlhttp.send();
}
    sendReq(`http://localhost:55825/Api/Events/${CurrentID}`, function processResponse(response) {
        //document.getElementById("el1").innerHTML = "";
        var el1 = document.getElementById("el1");
        el1.innerHTML = "";

        var data = JSON.parse(response);

        var eventTitle = document.createElement('h3');
        eventTitle.textContent = data.EventTitle;

        var eventDescription = document.createElement('p');
        eventDescription.textContent = data.EventDesc;

        el1.appendChild(eventTitle);
        el1.appendChild(eventDescription);
    });



    </script>

</body>

</html>